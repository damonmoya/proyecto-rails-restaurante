<h1>Reservas (<%= @email %>) </h1>

<% if @books.count >= 1 %>
  <table>
    <thead>
      <tr>
        <th>ID reserva</th>
        <th>Fecha y hora</th>
        <th>Comensales</th>
        <th>Estado</th>
        <th>Cargo</th>
        <th colspan="3">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% @books.each do |book| %>
        <tr>
          <td><%= book.id %></td>
          <td><%= book.start_time %></td>
          <td><%= book.diners %></td>
          <td><%= state_book(book) %></td>
          <td><%= charge_book(book) %></td>
          <% if ((book.start_time.to_i - @date_now)) >= @grace_time && book.charge == nil %>
            <td><%= link_to 'Cancelar reserva', book, method: :delete, data: { confirm: 'Cancelar reserva?' } %></td>
          <% else %>
            <td>No hay acciones disponibles</td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div>¡No hay reservas!</div>
<% end %>

<%= link_to 'Volver a sección de reservas', books_path %>